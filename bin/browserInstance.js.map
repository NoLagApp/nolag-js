{"version":3,"file":"browserInstance.js","sources":["../src/shared/enum/ETransportCommand.ts","../src/shared/utils/Encodings.ts","../src/shared/utils/TransportCommands.ts","../src/shared/utils/transport.ts","../src/shared/models/Topic.ts","../src/shared/enum.ts","../src/shared/constants.ts","../src/client/NoLagClient.ts","../src/client/index.ts","../src/unifiedWebsocket/browser.ts","../src/shared/utils/generateQueryString.ts","../src/api/controllers/tunnels/TunnelDevice.ts","../src/api/controllers/tunnels/TunnelPublish.ts","../src/api/controllers/tunnels/TunnelTopic.ts","../src/api/controllers/tunnels/TunnelApi.ts","../src/api/ApiTunnel.ts","../src/api/index.ts","../src/browserInstance.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["ETransportCommand","ETransportCommandSeparator","stringToArrayBuffer","str","buf","ArrayBuffer","length","bufView","Uint8Array","strLen","i","charCodeAt","stringToBuffer","bufferToString","buffer","uint8ArrayToString","reduce","accumulator","index","String","fromCharCode","TransportCommands","commandArray","setCommand","command","commandAction","this","push","commandActionArray","Array","isArray","convertArray","convertStringNumberArray","commandActionBuffer","from","commandActions","map","action","ArraySeparator","flat","build","transportCommands","NqlTransport","encode","payload","separatorArray","Payload","transportCommandsUintArray","commandLength","byteLength","payloadOffset","payloadLength","payloadUintArray","tmp","set","decode","transport","totalTransportBytes","transportBufferViewer","payloadSeparatorIndex","indexOf","commands","slice","payloadStartIndex","extractedCommands","extractCommands","getCommand","hasSeparatorIndexes","commandActionUint8ArrayToString","item","join","commandActionUint8ArrayToStringArray","groupedUint8Array","tempGroup","forEach","uint8Array","Number","commandByteGroup","commandBeingAssigned","byte","Object","values","keys","key","Topic","connection","topicName","onReceiveCallback","identifiers","presence","constructor","setConnection","saveIdentifiers","OR","subscribe","findSavedIdentifier","identifier","value","find","s","findKey","findValue","deleteSavedIdentifiers","identifierList","Identifier","Presence","AddAction","send","setPresence","_onReceiveMessage","data","onReceive","callbackFn","addIdentifiers","identifiersList","removeIdentifiers","DeleteAction","unsubscribe","publish","EConnectionStatus","EEnvironment","EEncoding","EVisibilityState","EAccessPermission","EStatus","ETopicType","ELoadBalanceType","CONSTANT","DefaultWsHost","DefaultApiHost","DefaultWsUrl","DefaultPort","DefaultWsProtocol","DefaultApiUrl","DefaultHttpProtocol","NoLagClient","host","authToken","wsInstance","protocol","url","deviceConnectionId","undefined","environment","deviceTokenId","defaultCheckConnectionInterval","defaultCheckConnectionTimeout","checkConnectionInterval","checkConnectionTimeout","reConnect","callbackOnOpen","callbackOnReceive","callbackOnClose","callbackOnError","connectionStatus","Idle","backpressureSendInterval","senderInterval","unifiedWebsocket","connectOptions","startSender","setInterval","sendTransport","shift","slowDownSender","backpressureInterval","clearInterval","addToBuffer","setReConnect","connect","initWebsocketConnection","Promise","resolve","reject","checkConnection","Connected","setTimeout","disconnect","close","onOpen","event","_onOpen","onMessage","_onReceive","onClose","_onClose","onError","_onError","authenticate","Connecting","Authenticate","Reconnect","callback","onReceiveMessage","decoded","InitConnection","Acknowledge","Error","Disconnected","Alert","presences","heartbeat","Tunnel","noLagClient","topics","heartbeatTimer","heartBeatInterval","visibilityState","Visible","callbackOnDisconnect","callbackOnReconnect","callbackOnReceivedError","options","disconnectOnNoVisibility","onVisibilityChange","startHeartbeat","stopHeartbeat","initiate","reconnect","document","addEventListener","async","Hidden","err","canReconnect","doReconnect","onDisconnect","onReconnect","onErrors","getTopic","encodedBuffer","status","ws","WebSocket","binaryType","Arraybuffer","message","onopen","onclose","onerror","onmessage","generateQueryString","query","queryArray","queryObject","queryString","TunnelDevice","routeNamespace","parentRouteNamespace","tunnelId","requestParams","createDevice","response","fetch","baseURL","method","headers","body","JSON","stringify","json","getDeviceById","listDevices","updateDevice","deleteDevice","TunnelPublish","baseUrl","wsHost","TunnelTopic","createTopic","getTopicById","topicId","listTopics","updateTopic","deleteTopic","TunnelApi","apiTunnel","devices","getTunnel","updateTunnel","deleteTunnel","httpPublish","ApiTunnel","apiKey","wsUrl","tunnels","tunnelQuery","URLSearchParams","toString","createTunnel","tunnel","Api","console","log","WebSocketClient"],"mappings":"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"}