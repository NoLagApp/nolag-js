{"version":3,"file":"browserInstance.js","sources":["../src/shared/enum/ETransportCommand.ts","../src/shared/utils/Encodings.ts","../src/shared/utils/TransportCommands.ts","../src/shared/utils/transport.ts","../src/shared/models/Topic.ts","../src/shared/enum.ts","../src/shared/constants.ts","../src/client/NoLagClient.ts","../src/client/index.ts","../src/unifiedWebsocket/browser.ts","../src/shared/utils/generateQueryString.ts","../src/api/controllers/tunnels/TunnelDevice.ts","../src/api/controllers/tunnels/TunnelPublish.ts","../src/api/controllers/tunnels/TunnelTopic.ts","../src/api/controllers/tunnels/TunnelApi.ts","../src/api/ApiTunnel.ts","../src/api/index.ts","../src/browserInstance.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["ETransportCommand","ETransportCommandSeparator","stringToArrayBuffer","str","buf","ArrayBuffer","length","bufView","Uint8Array","strLen","i","charCodeAt","stringToBuffer","bufferToString","buffer","uint8ArrayToString","reduce","accumulator","index","String","fromCharCode","TransportCommands","commandArray","setCommand","command","commandAction","this","push","commandActionArray","Array","isArray","convertArray","convertStringNumberArray","commandActionBuffer","from","commandActions","map","action","ArraySeparator","flat","build","transportCommands","NqlTransport","encode","payload","separatorArray","Payload","transportCommandsUintArray","commandLength","byteLength","payloadOffset","payloadLength","payloadUintArray","tmp","set","decode","transport","totalTransportBytes","transportBufferViewer","payloadSeparatorIndex","indexOf","commands","slice","payloadStartIndex","extractedCommands","extractCommands","getCommand","hasSeparatorIndexes","commandActionUint8ArrayToString","item","join","commandActionUint8ArrayToStringArray","groupedUint8Array","tempGroup","forEach","uint8Array","Number","commandByteGroup","commandBeingAssigned","byte","Object","values","keys","key","Topic","connection","topicName","onReceiveCallback","identifiers","presence","tunnel","constructor","setConnection","saveIdentifiers","OR","subscribe","identifier","find","s","deleteSavedIdentifiers","identifierList","Identifier","Presence","AddAction","send","setPresence","_onReceiveMessage","data","onReceive","callbackFn","addIdentifiers","identifiersList","removeIdentifiers","DeleteAction","unsubscribe","publish","EConnectionStatus","EEnvironment","EEncoding","EVisibilityState","EAccessPermission","EStatus","ETopicType","ELoadBalanceType","CONSTANT","DefaultWsHost","DefaultApiHost","DefaultWsUrl","DefaultPort","DefaultWsProtocol","DefaultApiUrl","DefaultHttpProtocol","NoLagClient","host","authToken","wsInstance","protocol","url","deviceConnectionId","undefined","environment","deviceTokenId","defaultCheckConnectionInterval","defaultCheckConnectionTimeout","checkConnectionInterval","checkConnectionTimeout","reConnect","callbackOnOpen","callbackOnReceive","callbackOnClose","callbackOnError","connectionStatus","Idle","backpressureSendInterval","senderInterval","unifiedWebsocket","connectOptions","startSender","setInterval","sendTransport","shift","slowDownSender","backpressureInterval","clearInterval","addToBuffer","setReConnect","connect","initWebsocketConnection","Promise","resolve","reject","checkConnection","Connected","setTimeout","disconnect","close","onOpen","event","_onOpen","onMessage","_onReceive","onClose","_onClose","onError","_onError","authenticate","Connecting","Authenticate","Reconnect","callback","onReceiveMessage","decoded","InitConnection","Acknowledge","Error","Disconnected","Alert","presences","heartbeat","Tunnel","noLagClient","topics","heartbeatTimer","heartBeatInterval","visibilityState","Visible","callbackOnDisconnect","callbackOnReconnect","callbackOnReceivedError","options","disconnectOnNoVisibility","onVisibilityChange","startHeartbeat","stopHeartbeat","initiate","reconnect","document","addEventListener","async","Hidden","tunnelInstance","err","canReconnect","doReconnect","onDisconnect","onReconnect","onErrors","getTopic","removeTopicInstance","encodedBuffer","status","ws","WebSocket","binaryType","Arraybuffer","message","onopen","onclose","onerror","onmessage","generateQueryString","query","queryArray","queryObject","queryString","TunnelDevice","routeNamespace","parentRouteNamespace","tunnelId","requestParams","createDevice","response","fetch","baseURL","method","headers","body","JSON","stringify","json","getDeviceById","listDevices","updateDevice","deleteDevice","TunnelPublish","baseUrl","wsHost","TunnelTopic","createTopic","getTopicById","topicId","listTopics","updateTopic","deleteTopic","TunnelApi","apiTunnel","devices","getTunnel","updateTunnel","deleteTunnel","httpPublish","ApiTunnel","apiKey","wsUrl","tunnels","tunnelQuery","URLSearchParams","toString","createTunnel","Api","console","log","WebSocketClient"],"mappings":"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"}