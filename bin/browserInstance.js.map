{"version":3,"file":"browserInstance.js","sources":["../src/shared/enum/ETransportCommand.ts","../src/shared/utils/Encodings.ts","../src/shared/utils/TransportCommands.ts","../src/shared/utils/transport.ts","../src/shared/models/Topic.ts","../src/shared/enum.ts","../src/shared/constants.ts","../src/client/NoLagClient.ts","../src/client/index.ts","../src/unifiedWebsocket/browser.ts","../src/shared/utils/generateQueryString.ts","../src/api/controllers/tunnels/TunnelDevice.ts","../src/api/controllers/tunnels/TunnelPublish.ts","../src/api/controllers/tunnels/TunnelTopic.ts","../src/api/controllers/tunnels/TunnelApi.ts","../src/api/ApiTunnel.ts","../src/api/index.ts","../src/browserInstance.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["ETransportCommand","ETransportCommandSeparator","stringToArrayBuffer","str","buf","ArrayBuffer","length","bufView","Uint8Array","strLen","i","charCodeAt","stringToBuffer","bufferToString","buffer","uint8ArrayToString","reduce","accumulator","index","String","fromCharCode","TransportCommands","commandArray","setCommand","command","commandAction","this","push","commandActionArray","Array","isArray","convertArray","convertStringNumberArray","commandActionBuffer","from","commandActions","map","action","ArraySeparator","flat","build","transportCommands","NqlTransport","encode","payload","separatorArray","Payload","transportCommandsUintArray","commandLength","byteLength","payloadOffset","payloadLength","payloadUintArray","tmp","set","decode","transport","totalTransportBytes","transportBufferViewer","payloadSeparatorIndex","indexOf","commands","slice","payloadStartIndex","extractedCommands","extractCommands","getCommand","hasSeparatorIndexes","commandActionUint8ArrayToString","item","join","commandActionUint8ArrayToStringArray","groupedUint8Array","tempGroup","forEach","uint8Array","Number","commandByteGroup","commandBeingAssigned","byte","Object","values","keys","key","Topic","connection","topicName","onReceiveCallback","identifiers","presence","tunnel","constructor","setConnection","saveIdentifiers","OR","subscribe","identifier","find","s","deleteSavedIdentifiers","identifierList","Identifier","Presence","AddAction","console","log","send","setPresence","_onReceiveMessage","data","onReceive","callbackFn","addIdentifiers","identifiersList","removeIdentifiers","DeleteAction","unsubscribe","publish","EConnectionStatus","EEnvironment","EEncoding","EVisibilityState","EAccessPermission","EStatus","ETopicType","ELoadBalanceType","CONSTANT","DefaultWsHost","DefaultApiHost","DefaultWsUrl","DefaultPort","DefaultWsProtocol","DefaultApiUrl","DefaultHttpProtocol","NoLagClient","host","authToken","wsInstance","protocol","url","deviceConnectionId","undefined","environment","deviceTokenId","defaultCheckConnectionInterval","defaultCheckConnectionTimeout","checkConnectionInterval","checkConnectionTimeout","reConnect","callbackOnOpen","callbackOnReceive","callbackOnClose","callbackOnError","connectionStatus","Idle","backpressureSendInterval","senderInterval","unifiedWebsocket","connectOptions","startSender","setInterval","sendTransport","shift","slowDownSender","backpressureInterval","clearInterval","addToBuffer","setReConnect","connect","initWebsocketConnection","Promise","resolve","reject","checkConnection","Connected","setTimeout","disconnect","close","onOpen","event","_onOpen","onMessage","_onReceive","onClose","_onClose","onError","_onError","authenticate","Connecting","Authenticate","Reconnect","callback","onReceiveMessage","decoded","InitConnection","Acknowledge","Error","Disconnected","Alert","presences","heartbeat","Tunnel","noLagClient","topics","heartbeatTimer","heartBeatInterval","visibilityState","Visible","callbackOnDisconnect","callbackOnReconnect","callbackOnReceivedError","options","disconnectOnNoVisibility","onVisibilityChange","startHeartbeat","stopHeartbeat","initiate","reconnect","document","addEventListener","async","Hidden","tunnelInstance","err","canReconnect","doReconnect","onDisconnect","onReconnect","onErrors","getTopic","removeTopicInstance","encodedBuffer","status","ws","WebSocket","binaryType","Arraybuffer","message","onopen","onclose","onerror","onmessage","generateQueryString","query","queryArray","queryObject","queryString","TunnelDevice","routeNamespace","parentRouteNamespace","tunnelId","requestParams","createDevice","response","fetch","baseURL","method","headers","body","JSON","stringify","json","getDeviceById","listDevices","updateDevice","deleteDevice","TunnelPublish","baseUrl","wsHost","TunnelTopic","createTopic","getTopicById","topicId","listTopics","updateTopic","deleteTopic","TunnelApi","apiTunnel","devices","getTunnel","updateTunnel","deleteTunnel","httpPublish","ApiTunnel","apiKey","wsUrl","tunnels","tunnelQuery","URLSearchParams","toString","createTunnel","Api","WebSocketClient"],"mappings":"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"}